version: "2.0"

rules:
  - rule: Say `hello` when the user starts a conversation with intent `greet`
    conversation_start: true
    steps:
      - intent: greet
      - action: utter_greet

  - rule: Listen after "user_name" and "user_email" are set
    # TODO: Add "conversaton_start" after testing is done
    steps:
      - intent: set_info
      - slot_was_set:
          - user_name: "name"
      - slot_was_set:
          - user_email: "email"
      - action: action_listen

  - rule: Whenever 'new_user' intent, send the new-user dialogue
    # TODO: Add "conversaton_start" after testing is done
    # conversation_start: true
    steps:
      - intent: new_user
      - action: action_new_user
      - action: new_mission_form
      - active_loop: new_mission_form
      - slot_was_set:
          - time: "time"
      - active_loop: null
      - slot_was_set:
          - requested_slot: null
      - action: action_get_time_from_text
      - action: action_save_mission

  # - rule: Whenever create_goal_form is submitted, set actual_time
  #   condition:
  #     - active_loop: create_goal_form
  #   steps:
  #     - action: create_goal_form
  #     - active_loop: null
  #     - slot_was_set:
  #         - requested_slot: null
  #     - action: action_get_time_from_text
  #     - action: action_goal_created
