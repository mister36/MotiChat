version: "2.0"
# If this doesn't work, reset the time slot again

intents:
  - greet
  - goodbye
  - affirm
  - deny
  # - mood_great
  # - mood_unhappy
  - bot_challenge
  - motivational_quote
  - inform
  - future
  - set_info
  - new_user
  - feeling
  - improve_mood
  - new_goal

entities:
  - mission
  - time
  - number
  - duration
  - user_name
  - user_email
  - user_id
  - user_is_new
  - sentiment

forms:
  new_mission_form:
    mission:
      - type: from_text
    mission_end:
      - type: from_entity
        entity: time

  new_goal_form:
    goal:
      - type: from_text
    goal_end:
      - type: from_entity
        entity: time

  record_mood_form:
    mood_reason:
      - type: from_text

slots:
  # SECTION: Mission & goals
  mission:
    type: text
    influence_conversation: false
    auto_fill: false

  mission_end:
    type: text
    influence_conversation: false
    auto_fill: false

  goal:
    type: text
    influence_conversation: false
    auto_fill: false

  goal_end:
    type: text
    influence_conversation: false
    auto_fill: false

  # SECTION: User info
  user_name:
    type: text
    influence_conversation: false
    # TODO: Remove this value
    initial_value: "Lila"

  user_email:
    type: text
    influence_conversation: false
    initial_value: "lila@gmail.com"

  user_id:
    type: text
    influence_conversation: false
    initial_value: "5fe825e39fb9ba71e7320534"

  user_is_new:
    type: bool
    influence_conversation: false
    initial_value: true

  # SECTION: Sentiment
  sentiment:
    type: slots.sentimentSlot.SentimentScoreSlot

  sentiment_for_form:
    type: float
    influence_conversation: true

  # SECTION: Mood
  improve_mood_with:
    type: categorical
    values:
      - fruit
    influence_conversation: true

  mood_reason:
    type: text
    influence_conversation: true

  # SECTION: Numbers
  time:
    type: text
    influence_conversation: true

  actual_time:
    type: text
    influence_conversation: true

  number:
    type: float
    influence_conversation: false

responses:
  utter_greet:
    - text: "What's up!"
    - text: "Hey, how are you doing?"
    - text: "Hey {user_name}! How you feeling?"

  utter_goodbye:
    - text: "Bye"

  utter_iam_bot:
    - text: "I am your motivational assistant, Moti"
    - text: "I was developed using artificial intelligence to motivate the human race"
    - text: "I'm not human. I am made from zeros and ones"

  # ANCHOR: New mission form
  utter_ask_new_mission_form_mission:
    - text: "So, {user_name}, what is your mission? Be as specific as possible:"

  utter_ask_new_mission_form_mission_end:
    - text: "Great! When do you want to accomplish this?"

  # ANCHOR: New goal form
  utter_ask_new_goal_form_goal:
    - text: "Now, whatâ€™s one thing you can do that will help you reach your mission?"

  utter_ask_new_goal_form_goal_end:
    - text: "When will you do that?"

  # ANCHOR: Mood
  utter_dig_in:
    - text: "Dig inðŸ˜‹"

  utter_check_moti_moods:
    - text: "Take a look at your MotiMoods and see what trends come up"

actions:
  # new user
  - action_new_user_mission
  - action_new_user_goal
  # mission
  - action_save_mission
  # mood
  - action_ask_record_mood_form_mood_reason
  - action_save_mood
  - action_improve_mood
  # quote
  - action_grab_quote
  # goal
  - action_save_goal
  # time
  - action_get_time_from_text
  - action_reset_time
  # form validation
  - validate_new_goal_form
  - validate_record_mood_form

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
